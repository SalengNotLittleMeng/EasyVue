{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/observe/watcher.js","../src/lifecycle.js","../src/init.js","../src/index.js"],"sourcesContent":["// 我们希望保留原数组特性并重写部分数组方法\nlet oldArrayProto = Array.prototype;\nexport let newArrayProto = Object.create(oldArrayProto);\n// 所有变异方法\nconst methods = [\n  \"push\",\n  \"shift\",\n  \"unshift\",\n  \"splice\",\n  \"pop\",\n  \"reverse\",\n  \"sort\",\n];\nmethods.forEach((method) => {\n  newArrayProto[method] = function (...args) {\n    // 内部调用原来的方法\n    const result = oldArrayProto[method].call(this, ...args);\n    let ob = this.__ob__;\n    // 将数组中新增的方法进行响应式劫持\n    let inserted;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    return result;\n  };\n});\n","let id=0;\r\nclass Dep{\r\n   constructor(){\r\n        this.id=id++;\r\n        this.subs=[];\r\n\r\n    }\r\n    depend(){\r\n        // 不希望放置重复的watcher\r\n        Dep.target.addDep(this)\r\n    }\r\n    addSub(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n    notify(){\r\n        this.subs.forEach(watcher=>{\r\n            watcher.update()\r\n        })\r\n    }\r\n}\r\nDep.target=null\r\nexport default Dep","import { newArrayProto } from \"./array\";\nimport Dep from './dep'\nclass Observe {\n  constructor(data) {\n    // 给数据添加一个表示__ob__,被标识的数据标识已经被观测过了\n    //data.__ob__=this 直接将this添加到__ob__后，会导致遍历可观测对象时遍历到this，形成死循环\n    // 添加属性__ob__并将这个属性设置为不可枚举，使其在遍历时无法被遍历\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false,\n    });\n    if (Array.isArray(data)) {\n      // 用户一般不会通过索引调用数组的值，直接遍历又会导致性能问题\n      //因此我们可以通过重写数组7个变异方法的方式来监控数据变化\n      //同时应该考虑数组中对象的劫持\n      data.__proto__ = newArrayProto;\n      this.observeArray(data); //监控数组中的对象,只将数组中的对象进行挂载\n    } else {\n      this.walk(data);\n    }\n    // Object.defineProperty只能劫持已经存在的属性l\n  }\n  walk(data) {\n    //循环对象，对属性依次劫持,重新定义属性\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n  observeArray(data) {\n    data.forEach((item) => {\n      observe(item);\n    });\n  }\n}\nexport function defineReactive(target, key, value) {\n  // 闭包，从外部拿到value\n  // 如果劫持到的属性依然是一个对象，就应该递归劫持所有属性，深度属性劫持\n  observe(value);\n// 每一个属性都有一个dep\n  let dep = new Dep()\n  Object.defineProperty(target, key, {\n    get() {\n    if(Dep.target){\n        dep.depend();\n    }\n      return value;\n    },\n    set(newValue) {\n      if (newValue == value) return;\n      value = newValue;\n      dep.notify()\n    },\n  });\n}\nexport function observe(data) {\n  if (typeof data != \"object\" || data == null) {\n    return; //只对对象进行劫持\n  }\n  //判断对象是否被劫持过，需要用一个实例来观测判断\n\n  return new Observe(data);\n}\n","import { observe } from \"./observe/index\";\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm);\n  }\n}\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      vm[target][key] = newValue;\n    },\n  });\n}\nfunction initData(vm) {\n  let { data } = vm.$options;\n  data = typeof data == \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  observe(data);\n  for (let key in data) {\n    proxy(vm, \"_data\", key);\n  }\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\n// 下面的这个正则中的：表示匹配命名空间：<div:XXX>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// 匹配前标签开始 <div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// 匹配结束的标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]>*>`);\n// 匹配属性,第一个分组是属性的key，属性的值是分组3/4/5\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>']+)))?/;\n//匹配前标签结束\nconst startTagClose = /^\\s*(\\/?)>/;\n// 匹配{{}}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n// 转化为ast模板语法树\nexport function parseHTML(html) {\n  const ELEMENT_TYPE = 1;\n  const TEXT_TYPE = 3;\n  const stack = [];\n  let currentParent;\n  let root;\n  // 创建节点\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    };\n  }\n  function advance(n) {\n    html = html.substring(n);\n  }\n  // 在解析的各个阶段建立一颗ast语法树\n  function start(tag, attrs) {\n    let node = createASTElement(tag, attrs);\n    if (!root) {\n      root = node;\n    }\n    if (currentParent) {\n      node.parent = currentParent;\n      currentParent.children.push(node);\n    }\n    stack.push(node);\n    currentParent = node;\n  }\n  function end(tag) {\n    stack.pop();\n    currentParent = stack[stack.length - 1];\n  }\n  function char(text) {\n    text = text.replace(/\\s/g, \"\");\n    text &&\n      currentParent.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentParent,\n      });\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: [start[1]], //标签名\n        attrs: [],\n      };\n      advance(start[0].length);\n      // 如果不是开始标签的结束，就一直匹配下去\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true,\n        });\n      }\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n  while (html) {\n    // textEnd如果为0，就是一个开始标签或结束标签\n    //textEnd>0,说明是一个文本\n    let textEnd = html.indexOf(\"<\"); //如果indexOf中的索引是0，就是一个标签\n    if (textEnd == 0) {\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        // 解析到开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    if (textEnd > 0) {\n      let text = html.substring(0, textEnd); //文本内容\n      if (text) {\n        char(text);\n        advance(text.length);\n      }\n      continue;\n    }\n  }\n  return root;\n}\n","import { parseHTML } from \"./parse\";\n// 匹配{{}}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nfunction genProps(attrs) {\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name == \"style\") {\n      let obj = {};\n      attr.value.split(\";\").forEach((item) => {\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\nfunction genChildren(children) {\n  if (children) {\n    return children\n      .map((child) => {\n        return gen(child);\n      })\n      .join(\",\");\n  }\n}\nfunction gen(node) {\n  if (node.type === 1) {\n    return codegen(node);\n  } else {\n    let text = node.text;\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    } else {\n      let tokens = [];\n      let match;\n      defaultTagRE.lastIndex = 0;\n      let lastIndex = 0;\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index;\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join(\"+\")})`;\n    }\n  }\n}\nfunction codegen(ast) {\n  let children = genChildren(ast.children);\n  let code = `_c('${ast.tag}',${\n    ast.attrs.length > 0 ? genProps(ast.attrs) : \"null\"\n  }${ast.children.length ? `,${children}` : \"\"})`;\n  return code;\n}\nexport function complieToFunction(template) {\n  let ast = parseHTML(template);\n  let code = codegen(ast);\n  code = `with(this){return ${code}}`;\n  let render = new Function(code);\n  return render;\n}\n","export function createElementVNode(vm, tag, data, ...children) {\n    if(data==null){\n        data={}\n    }\n  let key = data.key;\n  if (key) {\n    delete data.key;\n  }\n  return vnode(vm, tag, key, data, children);\n}\n\nexport function createTextVNode(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n// ast是描述JS，css,等语言本身的情况的\n// 虚拟dom是描述dom节点的\nfunction vnode(vm, tag, key, data, children, text) {\n  return {\n    vm,\n    tag,\n    key,\n    data,\n    children,\n    text,\n  };\n}\n","import Dep from './dep'\r\nlet id=0;\r\nclass Watcher{\r\n    constructor(vm,fn){\r\n        this.id=id++;\r\n    this.renderWatcher=vm.options;\r\n    // getter意味着调用这个函数会发生取值\r\n    this.getter=fn;\r\n    // 让watcher去记住所有dep，后续实现计算属性和清理工作需要使用\r\n    this.deps=[]\r\n    this.depsId=new Set()\r\n    this.get()\r\n    }\r\n    get(){\r\n    // 会去vm上取值\r\n    Dep.target=this\r\n    this.getter()\r\n    Dep.target=null\r\n    }\r\n    update(){\r\n        // 重新渲染\r\n        queueWatcher(this);\r\n    }\r\n    addDep(dep){\r\n        // 一个组件对应着多个属性，重复的属性也不用记录\r\n        let id=dep.id;\r\n        if(!this.depsId.has(id)){\r\n         this.deps.push(dep)\r\n         this.depsId.add(id)\r\n        dep.addSub(this);\r\n        }\r\n    }\r\n    run(){\r\n        this.get()\r\n    }\r\n}\r\nlet queue= []\r\nlet has={}\r\nlet pending=false\r\nfunction flushSchedulerQueue(){\r\n    let flushQueue =queue.slice(0)\r\n    flushQueue.forEach(q=>{\r\n        q.run()\r\n    })\r\n    queue=[]\r\n    has={}\r\n    pending=false\r\n}\r\nfunction queueWatcher(watcher){\r\n    const id=watcher.id;\r\n    if(!has[id]){\r\n        queue.push(watcher);\r\n        has[id]=true;\r\n    //    不论update执行多少次，只执行一轮刷新操作\r\n// 多次操作只走第一次，后面的操作都会被放到队列里，等第一次执行完后下一个事件环执行\r\n    if(!pending){\r\n        timerFunc(flushSchedulerQueue)\r\n        pending=true\r\n    }\r\n    }\r\n}\r\nlet callbacks=[]\r\nlet waiting=false\r\nfunction flushCallbacks(){\r\n    let cbs=callbacks.slice(0)\r\n    cbs.forEach(cb=>cb())\r\n    waiting=false;\r\n    callbacks=[]\r\n}\r\n// nextTick不是创建了一个异步任务，而是将这个任务维护到了队列中\r\n// nextTick内部采用优雅降级：promise->MutationObserver->setImmediate->setTimeout\r\nlet timerFunc;\r\nif(Promise){\r\n    timerFunc=(fn)=>{\r\n      Promise.resolve().then(fn)\r\n    }\r\n}else if(MutationObserver){\r\n        // 这里传入的回调是异步任务\r\n    timerFunc=(fn)=>{\r\n    let observe=new MutationObserver(fn)\r\n    let textNode=document.createElement(1);\r\n    observe.observe(textNode,{\r\n        characterData:true\r\n    });\r\n        textNode.textContent=2;\r\n    }\r\n}else if(setImmediate){\r\n    timerFunc=(fn)=>{\r\n        setImmediate(fn)\r\n    }\r\n}else{\r\n    timerFunc=(fn)=>{\r\n        setTimeout(fn,0)\r\n    }\r\n}\r\nexport const nextTick=function(cb){\r\n    callbacks.push(cb);\r\n    if(!waiting){\r\n    timerFunc(flushCallbacks)\r\n    waiting=true\r\n    }\r\n}\r\n// 需要给每个属性增加dep,\r\n// n个属性对应一个视图，n个dep对应一个watcher\r\n// 一个属性对应多个视图 1个dep对应多个watcher\r\n// 多对多关系\r\nexport default Watcher","import { createElementVNode, createTextVNode } from \"./vdom/index\";\nimport Watcher from './observe/watcher'\nfunction createElm(vnode){\n    let {tag,data,children,text} = vnode\n    if(typeof tag=='string'){\n// 将真实节点和虚拟节点进行对应，为后续diff算法做准备\n       vnode.el=document.createElement(tag)\n        patchProps(vnode.el,data)\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child))\n        });\n    }else{\n      vnode.el=document.createTextNode(text)\n    }\n    return vnode.el\n}\nfunction patchProps(el,props){\n    for(let key in props){\n        if(key=='style'){\n            for(let styleName in props.style){\n                el.style[styleName]=props.style[styleName]\n            }\n        }else{\n            el.setAttribute(key,props[key])\n        }\n    }\n}\nfunction patch(oldVNode,vnode){\n    const isRealElement = oldVNode.nodeType;\n    if(isRealElement){\n// 获取真实元素\n    const elm=oldVNode; \n// 拿到父元素\n    const parentElm=elm.parentNode \n   let newElm=createElm(vnode);\n    parentElm.insertBefore(newElm,elm.nextSibiling)\n    parentElm.removeChild(elm)\n    return newElm\n    }\n    else{\n        // diff算法\n    }\n}\nexport function initLifeCycle(Vue) {\n  Vue.prototype._update = function (vnode) {\n    // patch既有初始化功能，又有更新的功能\n    const vm=this\n    const el=vm.$el\n    vm.$el= patch(el,vnode)\n    };\n  Vue.prototype._render = function () {\n    // 渲染时会去实例上取值\n    const vm = this;\n    return vm.$options.render.call(this); //转移后生产的 render方法\n  };\n  Vue.prototype._c = function () {\n    return createElementVNode(this, ...arguments);\n  };\n  Vue.prototype._v = function () {\n    return createTextVNode(this, ...arguments);\n  };\n  Vue.prototype._s = function (value) {\n    if(typeof value!=='object') return value\n    return JSON.stringify(value);\n  };\n}\nexport function mountComponent(vm, el) {\n  vm.$el=el;\n  const updateComponent=()=>{\n      vm._update(vm._render()); //vm.$options.render,返回虚拟节点\n    }\n  // 1.调用render方法，产生虚拟dom\n   const watcher= new Watcher(vm,updateComponent,true)\n  // 2.根据虚拟dom产生真实dom\n\n  // 3.插入到el元素中\n}\n\n// 将模板转化为ast模板语法树，ast转化为render函数，后续每次数据更新只执行render函数（无需再转化ast）\n// render函数会产生虚拟节点，根据创造的虚拟节点创造真实Dom\n","// 给Vue增加初始化方法\nimport { initState } from \"./state\";\nimport { complieToFunction } from \"./compiler/index\";\nimport { mountComponent } from \"./lifecycle\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    initState(vm);\n    if (options.el) {\n      vm.$mount(options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    let opts = vm.$options;\n    console.log(opts);\n    // 当没有render函数时\n    if (!opts?.render) {\n      let template = null;\n      // 没有模板但写了el\n      if (!opts.template && opts.el) {\n        template = el.outerHTML;\n        // 存在模板或不存在模板和el\n      } else {\n        // 存在模板\n        if (opts.template) {\n          template = opts.template;\n        } else {\n          // 既没有模板也没有el\n          template = \"<div></div>\";\n        }\n      }\n      //拿到模板\n      // 获取优先级：render=>temple=>el\n      if (template) {\n        const render = complieToFunction(template);\n        opts.render = render;\n      }\n    }\n    mountComponent(vm, el);\n  };\n}\n// script标签引入的vue，编译过程在浏览器\n// runtime是不包含编译的，编译时通过loader进行转译.vue文件，用runtime不能使用template(在mian.js中，.vue文件有loader转译，因此不影响)\n// 包含main.js中模板编译的版本是runtime-with-compiler\n","import { initMixin } from \"./init\";\nimport { initLifeCycle } from \"./lifecycle\";\nimport {nextTick} from './observe/watcher'\nfunction Vue(options) {\n  this._init(options);\n}\n// 扩展了init方法\n\nVue.prototype.$nextTick=nextTick\ninitMixin(Vue);\ninitLifeCycle(Vue);\nexport default Vue;\n"],"names":["oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","call","ob","__ob__","inserted","slice","observeArray","id","Dep","subs","target","addDep","watcher","push","update","Observe","data","defineProperty","value","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","observe","dep","get","depend","set","newValue","notify","initState","vm","opts","$options","initData","proxy","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","advance","n","substring","start","node","end","pop","length","char","text","replace","parseStartTag","match","tagName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","i","obj","split","JSON","stringify","genChildren","map","child","gen","join","codegen","test","tokens","lastIndex","exec","index","trim","ast","code","complieToFunction","template","render","Function","createElementVNode","vnode","createTextVNode","undefined","Watcher","fn","renderWatcher","options","getter","deps","depsId","Set","queueWatcher","has","add","addSub","queue","pending","flushSchedulerQueue","flushQueue","q","run","timerFunc","callbacks","waiting","flushCallbacks","cbs","cb","Promise","resolve","then","MutationObserver","textNode","document","createElement","characterData","textContent","setImmediate","setTimeout","nextTick","createElm","el","patchProps","appendChild","createTextNode","props","styleName","style","setAttribute","patch","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibiling","removeChild","initLifeCycle","Vue","_update","$el","_render","_c","arguments","_v","_s","mountComponent","updateComponent","initMixin","_init","$mount","querySelector","console","log","outerHTML","$nextTick"],"mappings":"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"}