{"version":3,"file":"vue.js","sources":["../src/install.js","../src/index.js"],"sourcesContent":["export let Vue;\nexport function install(_Vue) {\n  Vue = _Vue;\n  Vue.mixin({\n    beforeCreate() {\n      // 这里不用原型继承的原因是因为会导致所有的Vue类共享路由\n      if (this.$options.router) {\n        // 根实例上传递了router\n        this._routerRoot = this;\n        this._router = this.$options.router;\n      } else {\n        // 所有组件上都增加一个routerRoot的指针指向根实例\n        this._routerRoot = this.$parent?._router;\n      }\n    },\n  });\n  // 劫持$router属性，取$router其实是取了根实例上的router\n  Object.defineProperty(Vue.prototype, \"$router\", {\n    get() {\n      return this._routerRoot._router;\n    },\n  });\n  Vue.component(\"router-link\", {\n    render(h) {\n      return h(\"a\", { class: \"foo\" }, [this.$slots.default]);\n    },\n  });\n  Vue.component(\"router-view\", {\n    render(h) {\n      return <div>hello</div>;\n    },\n  });\n}\n","import { install, Vue } from \"./install\";\nfunction createRouteMap(routes) {\n  let pathMap = {};\n  routes.forEach((route) => {\n    addRouteRecord(route, pathMap);\n  });\n}\nfunction addRouteRecord(route, pathMap) {\n  let path = route.path;\n  if (!pathMap[path]) {\n    pathMap[path] = {\n      path,\n      component: route.component,\n      props: route.props,\n      meta: route.meta,\n    };\n  }\n  route.children.forEach((children) => {\n    addRouteRecord(children, pathMap);\n  });\n}\nfunction createMatcher(routes) {\n  function addRoute() {}\n  function addRoutes() {}\n  function match() {}\n  return {\n    addRoutes, //添加多个路由\n    addRoute, //添加一个路由\n    match, //给一个路径来返回路由\n  };\n}\nclass VueRouter {\n  constructor(options) {\n    // 对用户传入的路由表进行映射\n    const routes = options.routes;\n    this.matcher = createMatcher(routes);\n  }\n}\nVueRouter.install = install;\nexport default VueRouter;\n"],"names":["Vue","install","_Vue","mixin","beforeCreate","$options","router","_routerRoot","_router","$parent","Object","defineProperty","prototype","get","component","render","h","$slots","_createVNode","_createTextVNode","createMatcher","routes","addRoute","addRoutes","match","VueRouter","options","matcher"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,IAAIA,GAAJ,CAAA;EACA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;EAC5BF,EAAAA,GAAG,GAAGE,IAAN,CAAA;IACAF,GAAG,CAACG,KAAJ,CAAU;EACRC,IAAAA,YADQ,EACO,SAAA,YAAA,GAAA;EACb;EACA,MAAA,IAAI,IAAKC,CAAAA,QAAL,CAAcC,MAAlB,EAA0B;EACxB;UACA,IAAKC,CAAAA,WAAL,GAAmB,IAAnB,CAAA;EACA,QAAA,IAAA,CAAKC,OAAL,GAAe,IAAKH,CAAAA,QAAL,CAAcC,MAA7B,CAAA;EACD,OAJD,MAIO;EAAA,QAAA,IAAA,aAAA,CAAA;;EACL;EACA,QAAA,IAAA,CAAKC,WAAL,GAAmB,CAAA,aAAA,GAAA,IAAA,CAAKE,OAAxB,MAAA,IAAA,IAAA,aAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAmB,cAAcD,OAAjC,CAAA;EACD,OAAA;EACF,KAAA;EAXO,GAAV,EAF4B;;IAgB5BE,MAAM,CAACC,cAAP,CAAsBX,GAAG,CAACY,SAA1B,EAAqC,SAArC,EAAgD;EAC9CC,IAAAA,GAD8C,EACxC,SAAA,GAAA,GAAA;QACJ,OAAO,IAAA,CAAKN,WAAL,CAAiBC,OAAxB,CAAA;EACD,KAAA;KAHH,CAAA,CAAA;EAKAR,EAAAA,GAAG,CAACc,SAAJ,CAAc,aAAd,EAA6B;MAC3BC,MAD2B,EAAA,SAAA,MAAA,CACpBC,CADoB,EACjB;QACR,OAAOA,CAAC,CAAC,GAAD,EAAM;UAAE,OAAO,EAAA,KAAA;EAAT,OAAN,EAAwB,CAAC,IAAA,CAAKC,MAAL,CAAA,SAAA,CAAD,CAAxB,CAAR,CAAA;EACD,KAAA;KAHH,CAAA,CAAA;EAKAjB,EAAAA,GAAG,CAACc,SAAJ,CAAc,aAAd,EAA6B;MAC3BC,MAD2B,EAAA,SAAA,MAAA,CACpBC,CADoB,EACjB;EACR,MAAA,OAAAE,eAAA,CAAA,KAAA,EAAA,IAAA,EAAA,CAAAC,mBAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA;EACD,KAAA;KAHH,CAAA,CAAA;EAKD;;ECXD,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;IAC7B,SAASC,QAAT,GAAoB,EAAE;;IACtB,SAASC,SAAT,GAAqB,EAAE;;IACvB,SAASC,KAAT,GAAiB,EAAE;;IACnB,OAAO;EACLD,IAAAA,SAAS,EAATA,SADK;EACM;EACXD,IAAAA,QAAQ,EAARA,QAFK;EAEK;MACVE,KAAK,EAALA,KAHK;;KAAP,CAAA;EAKD,CAAA;;MACKC,sCACJ,SAAYC,SAAAA,CAAAA,OAAZ,EAAqB;EAAA,EAAA,eAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA;;EACnB;EACA,EAAeA,OAAO,CAACL,OAAvB;EACA,EAAA,IAAA,CAAKM,OAAL,GAAeP,aAAa,CAAA,CAA5B,CAAA;EACD;;EAEHK,SAAS,CAACxB,OAAV,GAAoBA,OAApB;;;;;;;;"}