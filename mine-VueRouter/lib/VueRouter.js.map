{"version":3,"file":"VueRouter.js","sources":["../src/components/router-link.js","../src/components/router-view.js","../src/install.js","../src/create-routesMap.js","../src/create-matcher.js","../src/history/base.js","../src/history/history.js","../src/history/hash.js","../src/index.js"],"sourcesContent":["export default {\n  name: \"router-link\",\n  props: {\n    to: { type: String },\n    tag: { type: String, default: \"a\" },\n  },\n  methods: {\n    handler() {\n      this.$router.push(this.to);\n    },\n  },\n  render(h) {\n    let tag = this.tag;\n    return h(\n      tag,\n      {\n        on: {\n          click: () => {\n            this.handler();\n          },\n        },\n      },\n      [this.$slots.default]\n    );\n  },\n};\n","export default {\n  name: \"router-view\",\n  // router-view 不会被计入父子关系，应该被标识为抽象（函数式）组件,避免创建父子关系（$parents，$children等）\n  functional: true,\n  render(h, { parent, data }) {\n    data.routerView = true;\n    let route = parent.$route;\n    let depth = 0;\n    // 找到当前渲染的是第几层\n    while (parent) {\n      if (parent.$vnode && parent.$vnode.data.routerView) {\n        depth++;\n      }\n      parent = parent.$parent;\n    }\n    let record = route.matched[depth];\n    if (!record) {\n      return h();\n    }\n    return h(record.component, data);\n    // _vnode:渲染函数的虚拟节点；$vnode:代表组件本身，$vnode是_vnode的父亲\n  },\n};\n","import routerLink from \"./components/router-link\";\nimport routerView from \"./components/router-view\";\nexport let Vue;\nexport function install(_Vue) {\n  Vue = _Vue;\n  Vue.mixin({\n    beforeCreate() {\n      // 这里不用原型继承的原因是因为会导致所有的Vue类共享路由\n      if (this.$options.router) {\n        // 根实例上传递了router\n        this._routerRoot = this;\n        this._router = this.$options.router || {};\n        this._router.init(this); //this就是我们整个的应用(new Vue)\n        // 给根实例添加一个属性_router,就是当前的current对象\n        Vue.util.defineReactive(this, \"_route\", this._router.history.current);\n      } else {\n        // 所有组件上都增加一个routerRoot的指针指向根实例\n        this._routerRoot = this.$parent?._router || this.$parent._routerRoot;\n      }\n    },\n  });\n  // 劫持$router属性，取$router其实是取了根实例上的router\n  Object.defineProperty(Vue.prototype, \"$router\", {\n    get() {\n      return this._routerRoot;\n    },\n  });\n  Object.defineProperty(Vue.prototype, \"$route\", {\n    get() {\n      return this._routerRoot._route || this._routerRoot.history.current;\n    },\n  });\n  // 内部修改的是current\n  Vue.component(\"router-link\", routerLink);\n  Vue.component(\"router-view\", routerView);\n}\n","export default function createRouteMap(routes, pathMap = {}) {\n  // 根据用户选项扁平化信息,将深度子类转化为扁平层级\n  routes.forEach((route) => {\n    addRouteRecord(route, pathMap);\n  });\n  return {\n    pathMap,\n  };\n}\nfunction addRouteRecord(route, pathMap, parentRecord) {\n  let path = parentRecord\n    ? `${parentRecord.path == \"/\" ? \"\" : \"/\"}${route.path}`\n    : route.path;\n  if (!pathMap[path]) {\n    pathMap[path] = {\n      path,\n      component: route.component,\n      props: route.props,\n      meta: route.meta,\n      parent: parentRecord,\n    };\n  }\n  route.children &&\n    route.children.forEach((children) => {\n      addRouteRecord(children, pathMap);\n    });\n}\n","import createRouteMap from \"./create-routesMap\";\nexport default function createMatcher(routes) {\n  let { pathMap } = createRouteMap(routes);\n  function addRoutes(routes) {\n    // 动态添加路由\n    createRouteMap(routes, pathMap);\n  }\n  function addRoute(route) {\n    createRouteMap([route], pathMap);\n  }\n  function match(location) {\n    return pathMap[location];\n  }\n  return {\n    addRoutes, //添加多个路由\n    addRoute, //添加一个路由\n    match, //给一个路径来返回路由\n  };\n}\n","function createRoute(record, location) {\n  let matched = [];\n  if (record) {\n    while (record) {\n      matched.unshift(record);\n      record = record.parent;\n    }\n  }\n  return {\n    ...location,\n    matched,\n  };\n}\nfunction runQueue(queue, from, to, cb) {\n  function next(index) {\n    if (index >= queue.length) {\n      return cb();\n    }\n    let hook = queue[index];\n    hook(from, to, () => next(index + 1));\n  }\n  next(0);\n}\nexport default class Base {\n  constructor(router) {\n    this.router = router;\n    // 每次更新的是current，每次current变化，我们就可以切换页面\n    this.current = createRoute(null, {\n      path: \"/\",\n    });\n  }\n  // 所有跳转的逻辑都要放在transitionTo中来实现\n  transitionTo(location, listener) {\n    // 用之前的匹配方法\n    let record = this.router.match(location);\n    let route = createRoute(record, { path: location });\n    // 这里需要取消点击进入和路由变化中的两次重复变化，注意path='/'时可能会匹配组件\n    if (\n      location == this.current.path &&\n      route.matched.length == this.current.matched.length\n    ) {\n      return;\n    }\n    let queue = [].concat(this.router.beforeEachHooks);\n    // 钩子执行完后再做跳转\n    runQueue(queue, this.current, route, () => {\n      this.current = route;\n      // path:'/',matched:[]\n      // 当路由切换的时候，也应该调用transitionTo拿到新的记录\n      listener && listener();\n      this.cb && this.cb(route);\n    });\n  }\n  listen(cb) {\n    // 用户自定义的钩子 this._route=route\n    this.cb = cb;\n  }\n}\n","import Base from \"./base\";\nclass History extends Base {\n  constructor(router) {\n    super(router);\n  }\n  setupListener() {\n    window.addEventListener(\"popstate\", function () {\n      this.transitionTo(getCurrentLocation());\n    });\n  }\n  getCurrentLocation() {\n    return window.location.pathname;\n  }\n  push(location) {\n    this.transitionTo(location, () => {\n      window.history.pushState({}, \"\", location);\n    });\n  }\n}\n\nexport default History;\n","import Base from \"./base\";\nfunction ensureSlash() {\n  if (window.location.hash) {\n    return;\n  }\n  window.location.hash = \"/\";\n}\nfunction getHash() {\n  // 截取，获取真正的hash值\n  return window.location.hash.slice(1);\n}\nclass Hash extends Base {\n  constructor(router) {\n    super(router);\n    // 初始化哈希路由的时候要给定默认的哈希路径\n    ensureSlash();\n  }\n  // 之后需要调用此方法，监控hash值的变化\n  setupListener() {\n    // 这里会监听哈希的变化，通过修改url或回退也会触发\n    window.addEventListener(\"hashchange\", () => {\n      this.transitionTo(getHash());\n    });\n  }\n  getCurrentLocation() {\n    return getHash();\n  }\n  push(location) {\n    this.transitionTo(location, () => {\n      window.location.hash = location;\n    });\n  }\n}\nexport default Hash;\n","import { install, Vue } from \"./install\";\nimport createMatcher from \"./create-matcher\";\nimport History from \"./history/history\";\nimport Hash from \"./history/hash\";\nclass VueRouter {\n  constructor(options) {\n    this.install = install;\n    this.beforeEachHooks = [];\n    // 对用户传入的路由表进行映射\n    const routes = options.routes;\n    this.matcher = createMatcher(routes);\n    // 根据不用的模式创建不同的路由系统\n    let mode = options.mode || \"hash\";\n    if (mode == \"hash\") {\n      this.history = new Hash(this);\n    } else if (mode == \"history\") {\n      this.history = new History(this);\n    }\n  }\n  beforeEach(cb) {\n    this.beforeEachHooks.push(cb);\n  }\n  match(path) {\n    return this.matcher.match(path);\n  }\n  push(location) {\n    return this.history.push(location);\n  }\n  init(app) {\n    let history = this.history;\n    // 根据路径变化，匹配不同的组件进行渲染，路径变化，更新视图，路径需要是响应式的\n    history.transitionTo(history.getCurrentLocation(), () => {\n      history.setupListener(); //监听路由变化\n    });\n    // 每次路由需要调用listen中的方法实现更新_route的值，使他能够发生变化，重新渲染视图\n    history.listen((newRoute) => {\n      app._route = newRoute;\n    });\n  }\n}\nexport default VueRouter;\n"],"names":["name","props","to","type","String","tag","methods","handler","$router","push","render","h","on","click","$slots","functional","parent","data","routerView","route","$route","depth","$vnode","$parent","record","matched","component","Vue","install","_Vue","mixin","beforeCreate","$options","router","_routerRoot","_router","init","util","defineReactive","history","current","Object","defineProperty","prototype","get","_route","routerLink","createRouteMap","routes","pathMap","forEach","addRouteRecord","parentRecord","path","meta","children","createMatcher","addRoutes","addRoute","match","location","createRoute","unshift","_objectSpread","runQueue","queue","from","cb","next","index","length","hook","Base","listener","concat","beforeEachHooks","History","window","addEventListener","transitionTo","getCurrentLocation","pathname","pushState","ensureSlash","hash","getHash","slice","Hash","VueRouter","options","matcher","mode","app","setupListener","listen","newRoute"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mBAAe;EACbA,EAAAA,IAAI,EAAE,aADO;EAEbC,EAAAA,KAAK,EAAE;EACLC,IAAAA,EAAE,EAAE;EAAEC,MAAAA,IAAI,EAAEC,MAAAA;OADP;EAELC,IAAAA,GAAG,EAAE;EAAEF,MAAAA,IAAI,EAAEC,MAAR;QAAgB,SAAS,EAAA,GAAA;EAAzB,KAAA;KAJM;EAMbE,EAAAA,OAAO,EAAE;EACPC,IAAAA,OADO,EACG,SAAA,OAAA,GAAA;EACR,MAAA,IAAA,CAAKC,OAAL,CAAaC,IAAb,CAAkB,KAAKP,EAAvB,CAAA,CAAA;EACD,KAAA;KATU;IAWbQ,MAXa,EAAA,SAAA,MAAA,CAWNC,CAXM,EAWH;EAAA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;MACR,IAAIN,GAAG,GAAG,IAAA,CAAKA,GAAf,CAAA;MACA,OAAOM,CAAC,CACNN,GADM,EAEN;EACEO,MAAAA,EAAE,EAAE;EACFC,QAAAA,KAAK,EAAE,SAAM,KAAA,GAAA;EACX,UAAA,KAAI,CAACN,OAAL,EAAA,CAAA;EACD,SAAA;EAHC,OAAA;EADN,KAFM,EASN,CAAC,IAAA,CAAKO,MAAL,CAAA,SAAA,CAAD,CATM,CAAR,CAAA;EAWD,GAAA;EAxBY,CAAf;;ACAA,mBAAe;EACbd,EAAAA,IAAI,EAAE,aADO;EAEb;EACAe,EAAAA,UAAU,EAAE,IAHC;IAIbL,MAJa,EAAA,SAAA,MAAA,CAINC,CAJM,EAIe,IAAA,EAAA;MAAA,IAAhBK,MAAgB,QAAhBA,MAAgB;UAARC,IAAQ,QAARA,IAAQ,CAAA;MAC1BA,IAAI,CAACC,UAAL,GAAkB,IAAlB,CAAA;EACA,IAAA,IAAIC,KAAK,GAAGH,MAAM,CAACI,MAAnB,CAAA;EACA,IAAA,IAAIC,KAAK,GAAG,CAAZ,CAH0B;;EAK1B,IAAA,OAAOL,MAAP,EAAe;QACb,IAAIA,MAAM,CAACM,MAAP,IAAiBN,MAAM,CAACM,MAAP,CAAcL,IAAd,CAAmBC,UAAxC,EAAoD;UAClDG,KAAK,EAAA,CAAA;EACN,OAAA;;QACDL,MAAM,GAAGA,MAAM,CAACO,OAAhB,CAAA;EACD,KAAA;;EACD,IAAA,IAAIC,MAAM,GAAGL,KAAK,CAACM,OAAN,CAAcJ,KAAd,CAAb,CAAA;;MACA,IAAI,CAACG,MAAL,EAAa;EACX,MAAA,OAAOb,CAAC,EAAR,CAAA;EACD,KAAA;;MACD,OAAOA,CAAC,CAACa,MAAM,CAACE,SAAR,EAAmBT,IAAnB,CAAR,CAf0B;EAiB3B,GAAA;EArBY,CAAf;;ECEO,IAAIU,GAAJ,CAAA;EACA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;EAC5BF,EAAAA,GAAG,GAAGE,IAAN,CAAA;IACAF,GAAG,CAACG,KAAJ,CAAU;EACRC,IAAAA,YADQ,EACO,SAAA,YAAA,GAAA;EACb;EACA,MAAA,IAAI,IAAKC,CAAAA,QAAL,CAAcC,MAAlB,EAA0B;EACxB;UACA,IAAKC,CAAAA,WAAL,GAAmB,IAAnB,CAAA;EACA,QAAA,IAAA,CAAKC,OAAL,GAAe,IAAA,CAAKH,QAAL,CAAcC,MAAd,IAAwB,EAAvC,CAAA;;EACA,QAAA,IAAA,CAAKE,OAAL,CAAaC,IAAb,CAAkB,IAAlB,EAJwB;EAKxB;;;EACAT,QAAAA,GAAG,CAACU,IAAJ,CAASC,cAAT,CAAwB,IAAxB,EAA8B,QAA9B,EAAwC,IAAKH,CAAAA,OAAL,CAAaI,OAAb,CAAqBC,OAA7D,CAAA,CAAA;EACD,OAPD,MAOO;EAAA,QAAA,IAAA,aAAA,CAAA;;EACL;UACA,IAAKN,CAAAA,WAAL,GAAmB,CAAA,CAAA,aAAA,GAAA,IAAA,CAAKX,OAAL,MAAA,IAAA,IAAA,aAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,aAAA,CAAcY,OAAd,KAAyB,IAAA,CAAKZ,OAAL,CAAaW,WAAzD,CAAA;EACD,OAAA;EACF,KAAA;EAdO,GAAV,EAF4B;;IAmB5BO,MAAM,CAACC,cAAP,CAAsBf,GAAG,CAACgB,SAA1B,EAAqC,SAArC,EAAgD;EAC9CC,IAAAA,GAD8C,EACxC,SAAA,GAAA,GAAA;EACJ,MAAA,OAAO,KAAKV,WAAZ,CAAA;EACD,KAAA;KAHH,CAAA,CAAA;IAKAO,MAAM,CAACC,cAAP,CAAsBf,GAAG,CAACgB,SAA1B,EAAqC,QAArC,EAA+C;EAC7CC,IAAAA,GAD6C,EACvC,SAAA,GAAA,GAAA;QACJ,OAAO,IAAA,CAAKV,WAAL,CAAiBW,MAAjB,IAA2B,KAAKX,WAAL,CAAiBK,OAAjB,CAAyBC,OAA3D,CAAA;EACD,KAAA;EAH4C,GAA/C,EAxB4B;;EA8B5Bb,EAAAA,GAAG,CAACD,SAAJ,CAAc,aAAd,EAA6BoB,UAA7B,CAAA,CAAA;EACAnB,EAAAA,GAAG,CAACD,SAAJ,CAAc,aAAd,EAA6BR,UAA7B,CAAA,CAAA;EACD;;ECnCc,SAAS6B,cAAT,CAAwBC,MAAxB,EAA8C;IAAA,IAAdC,OAAc,uEAAJ,EAAI,CAAA;EAC3D;EACAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAAC/B,KAAD,EAAW;EACxBgC,IAAAA,cAAc,CAAChC,KAAD,EAAQ8B,OAAR,CAAd,CAAA;KADF,CAAA,CAAA;IAGA,OAAO;EACLA,IAAAA,OAAO,EAAPA,OAAAA;KADF,CAAA;EAGD,CAAA;;EACD,SAASE,cAAT,CAAwBhC,KAAxB,EAA+B8B,OAA/B,EAAwCG,YAAxC,EAAsD;IACpD,IAAIC,IAAI,GAAGD,YAAY,GAAA,EAAA,CAAA,MAAA,CAChBA,YAAY,CAACC,IAAb,IAAqB,GAArB,GAA2B,EAA3B,GAAgC,GADhB,SACsBlC,KAAK,CAACkC,IAD5B,CAEnBlC,GAAAA,KAAK,CAACkC,IAFV,CAAA;;EAGA,EAAA,IAAI,CAACJ,OAAO,CAACI,IAAD,CAAZ,EAAoB;MAClBJ,OAAO,CAACI,IAAD,CAAP,GAAgB;EACdA,MAAAA,IAAI,EAAJA,IADc;QAEd3B,SAAS,EAAEP,KAAK,CAACO,SAFH;QAGdzB,KAAK,EAAEkB,KAAK,CAAClB,KAHC;QAIdqD,IAAI,EAAEnC,KAAK,CAACmC,IAJE;EAKdtC,MAAAA,MAAM,EAAEoC,YAAAA;OALV,CAAA;EAOD,GAAA;;IACDjC,KAAK,CAACoC,QAAN,IACEpC,KAAK,CAACoC,QAAN,CAAeL,OAAf,CAAuB,UAACK,QAAD,EAAc;EACnCJ,IAAAA,cAAc,CAACI,QAAD,EAAWN,OAAX,CAAd,CAAA;EACD,GAFD,CADF,CAAA;EAID;;ECzBc,SAASO,aAAT,CAAuBR,MAAvB,EAA+B;IAC5C,IAAkBD,eAAAA,GAAAA,cAAc,CAACC,MAAD,CAAhC;QAAMC,OAAN,mBAAMA,OAAN,CAAA;;IACA,SAASQ,SAAT,CAAmBT,MAAnB,EAA2B;EACzB;EACAD,IAAAA,cAAc,CAACC,MAAD,EAASC,OAAT,CAAd,CAAA;EACD,GAAA;;IACD,SAASS,QAAT,CAAkBvC,KAAlB,EAAyB;EACvB4B,IAAAA,cAAc,CAAC,CAAC5B,KAAD,CAAD,EAAU8B,OAAV,CAAd,CAAA;EACD,GAAA;;IACD,SAASU,KAAT,CAAeC,QAAf,EAAyB;MACvB,OAAOX,OAAO,CAACW,QAAD,CAAd,CAAA;EACD,GAAA;;IACD,OAAO;EACLH,IAAAA,SAAS,EAATA,SADK;EACM;EACXC,IAAAA,QAAQ,EAARA,QAFK;EAEK;MACVC,KAAK,EAALA,KAHK;;KAAP,CAAA;EAKD;;EClBD,SAASE,WAAT,CAAqBrC,MAArB,EAA6BoC,QAA7B,EAAuC;IACrC,IAAInC,OAAO,GAAG,EAAd,CAAA;;EACA,EAAA,IAAID,MAAJ,EAAY;EACV,IAAA,OAAOA,MAAP,EAAe;QACbC,OAAO,CAACqC,OAAR,CAAgBtC,MAAhB,CAAA,CAAA;QACAA,MAAM,GAAGA,MAAM,CAACR,MAAhB,CAAA;EACD,KAAA;EACF,GAAA;;EACD,EAAA,OAAA+C,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKH,QADL,CAAA,EAAA,EAAA,EAAA;EAEEnC,IAAAA,OAAO,EAAPA,OAAAA;EAFF,GAAA,CAAA,CAAA;EAID,CAAA;;EACD,SAASuC,QAAT,CAAkBC,KAAlB,EAAyBC,IAAzB,EAA+BhE,EAA/B,EAAmCiE,EAAnC,EAAuC;IACrC,SAASC,IAAT,CAAcC,KAAd,EAAqB;EACnB,IAAA,IAAIA,KAAK,IAAIJ,KAAK,CAACK,MAAnB,EAA2B;EACzB,MAAA,OAAOH,EAAE,EAAT,CAAA;EACD,KAAA;;EACD,IAAA,IAAII,IAAI,GAAGN,KAAK,CAACI,KAAD,CAAhB,CAAA;EACAE,IAAAA,IAAI,CAACL,IAAD,EAAOhE,EAAP,EAAW,YAAA;EAAA,MAAA,OAAMkE,IAAI,CAACC,KAAK,GAAG,CAAT,CAAV,CAAA;EAAA,KAAX,CAAJ,CAAA;EACD,GAAA;;IACDD,IAAI,CAAC,CAAD,CAAJ,CAAA;EACD,CAAA;;MACoBI;EACnB,EAAA,SAAA,IAAA,CAAYvC,MAAZ,EAAoB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA;;EAClB,IAAA,IAAA,CAAKA,MAAL,GAAcA,MAAd,CADkB;;EAGlB,IAAA,IAAA,CAAKO,OAAL,GAAeqB,WAAW,CAAC,IAAD,EAAO;EAC/BR,MAAAA,IAAI,EAAE,GAAA;EADyB,KAAP,CAA1B,CAAA;EAGD;;;;;aAED,SAAaO,YAAAA,CAAAA,QAAb,EAAuBa,QAAvB,EAAiC;EAAA,MAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;EAC/B;QACA,IAAIjD,MAAM,GAAG,IAAKS,CAAAA,MAAL,CAAY0B,KAAZ,CAAkBC,QAAlB,CAAb,CAAA;EACA,MAAA,IAAIzC,KAAK,GAAG0C,WAAW,CAACrC,MAAD,EAAS;EAAE6B,QAAAA,IAAI,EAAEO,QAAAA;SAAjB,CAAvB,CAH+B;;EAK/B,MAAA,IACEA,QAAQ,IAAI,IAAA,CAAKpB,OAAL,CAAaa,IAAzB,IACAlC,KAAK,CAACM,OAAN,CAAc6C,MAAd,IAAwB,IAAK9B,CAAAA,OAAL,CAAaf,OAAb,CAAqB6C,MAF/C,EAGE;EACA,QAAA,OAAA;EACD,OAAA;;QACD,IAAIL,KAAK,GAAG,EAAA,CAAGS,MAAH,CAAU,IAAKzC,CAAAA,MAAL,CAAY0C,eAAtB,CAAZ,CAX+B;;QAa/BX,QAAQ,CAACC,KAAD,EAAQ,IAAA,CAAKzB,OAAb,EAAsBrB,KAAtB,EAA6B,YAAM;EACzC,QAAA,KAAI,CAACqB,OAAL,GAAerB,KAAf,CADyC;EAGzC;;UACAsD,QAAQ,IAAIA,QAAQ,EAApB,CAAA;UACA,KAAI,CAACN,EAAL,IAAW,KAAI,CAACA,EAAL,CAAQhD,KAAR,CAAX,CAAA;EACD,OANO,CAAR,CAAA;EAOD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,MAAA,CAAOgD,EAAP,EAAW;EACT;QACA,IAAKA,CAAAA,EAAL,GAAUA,EAAV,CAAA;EACD,KAAA;;;;;;MCvDGS;;;;;EACJ,EAAA,SAAA,OAAA,CAAY3C,MAAZ,EAAoB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA,CAAA;;EAAA,IAAA,OAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EACZA,MADY,CAAA,CAAA;EAEnB,GAAA;;;;aACD,SAAgB,aAAA,GAAA;EACd4C,MAAAA,MAAM,CAACC,gBAAP,CAAwB,UAAxB,EAAoC,YAAY;UAC9C,IAAKC,CAAAA,YAAL,CAAkBC,kBAAkB,EAApC,CAAA,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;aACD,SAAqB,kBAAA,GAAA;EACnB,MAAA,OAAOH,MAAM,CAACjB,QAAP,CAAgBqB,QAAvB,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKrB,QAAL,EAAe;EACb,MAAA,IAAA,CAAKmB,YAAL,CAAkBnB,QAAlB,EAA4B,YAAM;UAChCiB,MAAM,CAACtC,OAAP,CAAe2C,SAAf,CAAyB,EAAzB,EAA6B,EAA7B,EAAiCtB,QAAjC,CAAA,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;;IAhBmBY;;ECAtB,SAASW,WAAT,GAAuB;EACrB,EAAA,IAAIN,MAAM,CAACjB,QAAP,CAAgBwB,IAApB,EAA0B;EACxB,IAAA,OAAA;EACD,GAAA;;EACDP,EAAAA,MAAM,CAACjB,QAAP,CAAgBwB,IAAhB,GAAuB,GAAvB,CAAA;EACD,CAAA;;EACD,SAASC,OAAT,GAAmB;EACjB;IACA,OAAOR,MAAM,CAACjB,QAAP,CAAgBwB,IAAhB,CAAqBE,KAArB,CAA2B,CAA3B,CAAP,CAAA;EACD,CAAA;;MACKC;;;;;EACJ,EAAA,SAAA,IAAA,CAAYtD,MAAZ,EAAoB;EAAA,IAAA,IAAA,KAAA,CAAA;;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA;;MAClB,KAAMA,GAAAA,MAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAAAA,MAAN,EADkB;;MAGlBkD,WAAW,EAAA,CAAA;EAHO,IAAA,OAAA,KAAA,CAAA;EAInB;;;;;aAED,SAAgB,aAAA,GAAA;EAAA,MAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;EACd;EACAN,MAAAA,MAAM,CAACC,gBAAP,CAAwB,YAAxB,EAAsC,YAAM;EAC1C,QAAA,MAAI,CAACC,YAAL,CAAkBM,OAAO,EAAzB,CAAA,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;aACD,SAAqB,kBAAA,GAAA;EACnB,MAAA,OAAOA,OAAO,EAAd,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKzB,QAAL,EAAe;EACb,MAAA,IAAA,CAAKmB,YAAL,CAAkBnB,QAAlB,EAA4B,YAAM;EAChCiB,QAAAA,MAAM,CAACjB,QAAP,CAAgBwB,IAAhB,GAAuBxB,QAAvB,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;;IApBgBY;;MCPbgB;EACJ,EAAA,SAAA,SAAA,CAAYC,OAAZ,EAAqB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA;;MACnB,IAAK7D,CAAAA,OAAL,GAAeA,OAAf,CAAA;EACA,IAAA,IAAA,CAAK+C,eAAL,GAAuB,EAAvB,CAFmB;;EAInB,IAAA,IAAM3B,MAAM,GAAGyC,OAAO,CAACzC,MAAvB,CAAA;EACA,IAAA,IAAA,CAAK0C,OAAL,GAAelC,aAAa,CAACR,MAAD,CAA5B,CALmB;;EAOnB,IAAA,IAAI2C,IAAI,GAAGF,OAAO,CAACE,IAAR,IAAgB,MAA3B,CAAA;;MACA,IAAIA,IAAI,IAAI,MAAZ,EAAoB;EAClB,MAAA,IAAA,CAAKpD,OAAL,GAAe,IAAIgD,IAAJ,CAAS,IAAT,CAAf,CAAA;EACD,KAFD,MAEO,IAAII,IAAI,IAAI,SAAZ,EAAuB;EAC5B,MAAA,IAAA,CAAKpD,OAAL,GAAe,IAAIqC,OAAJ,CAAY,IAAZ,CAAf,CAAA;EACD,KAAA;EACF,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,UAAA,CAAWT,EAAX,EAAe;EACb,MAAA,IAAA,CAAKQ,eAAL,CAAqBlE,IAArB,CAA0B0D,EAA1B,CAAA,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,KAAA,CAAMd,IAAN,EAAY;EACV,MAAA,OAAO,KAAKqC,OAAL,CAAa/B,KAAb,CAAmBN,IAAnB,CAAP,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKO,QAAL,EAAe;EACb,MAAA,OAAO,KAAKrB,OAAL,CAAa9B,IAAb,CAAkBmD,QAAlB,CAAP,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKgC,GAAL,EAAU;EACR,MAAA,IAAIrD,OAAO,GAAG,IAAKA,CAAAA,OAAnB,CADQ;;QAGRA,OAAO,CAACwC,YAAR,CAAqBxC,OAAO,CAACyC,kBAAR,EAArB,EAAmD,YAAM;UACvDzC,OAAO,CAACsD,aAAR,EAAA,CADuD;EAExD,OAFD,EAHQ;;EAORtD,MAAAA,OAAO,CAACuD,MAAR,CAAe,UAACC,QAAD,EAAc;UAC3BH,GAAG,CAAC/C,MAAJ,GAAakD,QAAb,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;;;;;;;;;;"}