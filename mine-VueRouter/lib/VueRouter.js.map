{"version":3,"file":"VueRouter.js","sources":["../src/components/router-link.js","../src/components/router-view.js","../src/install.js","../src/create-routesMap.js","../src/create-matcher.js","../src/history/base.js","../src/history/history.js","../src/history/hash.js","../src/index.js"],"sourcesContent":["export default {\n  name: \"router-link\",\n  props: {\n    to: { type: String },\n    tag: { type: String, default: \"a\" },\n  },\n  methods: {\n    handler() {\n      this.$router.push(this.to);\n    },\n  },\n  render(h) {\n    let tag = this.tag;\n    return h(\n      tag,\n      {\n        on: {\n          click: () => {\n            this.handler();\n          },\n        },\n      },\n      [this.$slots.default]\n    );\n  },\n};\n","export default {\r\n  name: \"router-view\",\r\n  // router-view 不会被计入父子关系，应该被标识为抽象（函数式）组件,避免创建父子关系（$parents，$children等）\r\n  functional: true,\r\n  render(h, { parent, data }) {\r\n    data.routerView = true;\r\n    console.log(parent.$route);\r\n    let route = parent.$route;\r\n    let depth = 0;\r\n    // 找到当前渲染的是第几层\r\n    while (parent) {\r\n      if (parent.$vnode && parent.$vnode.data.routerView) {\r\n        depth++;\r\n      }\r\n      parent = parent.$parent;\r\n    }\r\n    let record = route.matched[depth];\r\n    if (!record) {\r\n      return h();\r\n    }\r\n    return h(record.component, data);\r\n    // _vnode:渲染函数的虚拟节点；$vnode:代表组件本身，$vnode是_vnode的父亲\r\n  },\r\n};\r\n","import routerLink from \"./components/router-link\";\nimport routerView from \"./components/router-view\";\nexport let Vue;\nexport function install(_Vue) {\n  Vue = _Vue;\n  Vue.mixin({\n    beforeCreate() {\n      // 这里不用原型继承的原因是因为会导致所有的Vue类共享路由\n      if (this.$options.router) {\n        // 根实例上传递了router\n        this._routerRoot = this;\n        this._router = this.$options.router || {};\n        this._router.init(this); //this就是我们整个的应用(new Vue)\n        // 给根实例添加一个属性_router,就是当前的current对象\n        Vue.util.defineReactive(this, \"_route\", this._router.history.current);\n      } else {\n        // 所有组件上都增加一个routerRoot的指针指向根实例\n        this._routerRoot = this.$parent?._router || this.$parent._routerRoot;\n      }\n    },\n  });\n  // 劫持$router属性，取$router其实是取了根实例上的router\n  Object.defineProperty(Vue.prototype, \"$router\", {\n    get() {\n      return this._routerRoot;\n    },\n  });\n  Object.defineProperty(Vue.prototype, \"$route\", {\n    get() {\n      return this._routerRoot._route || this._routerRoot.history.current;\n    },\n  });\n  // 内部修改的是current\n  Vue.component(\"router-link\", routerLink);\n  Vue.component(\"router-view\", routerView);\n}\n","export default function createRouteMap(routes, pathMap = {}) {\n  // 根据用户选项扁平化信息,将深度子类转化为扁平层级\n  routes.forEach((route) => {\n    addRouteRecord(route, pathMap);\n  });\n  return {\n    pathMap,\n  };\n}\nfunction addRouteRecord(route, pathMap, parentRecord) {\n  let path = parentRecord\n    ? `${parentRecord.path == \"/\" ? \"\" : \"/\"}${route.path}`\n    : route.path;\n  if (!pathMap[path]) {\n    pathMap[path] = {\n      path,\n      component: route.component,\n      props: route.props,\n      meta: route.meta,\n      parent: parentRecord,\n    };\n  }\n  route.children &&\n    route.children.forEach((children) => {\n      addRouteRecord(children, pathMap);\n    });\n}\n","import createRouteMap from \"./create-routesMap\";\nexport default function createMatcher(routes) {\n  let { pathMap } = createRouteMap(routes);\n  function addRoutes(routes) {\n    // 动态添加路由\n    createRouteMap(routes, pathMap);\n  }\n  function addRoute(route) {\n    createRouteMap([route], pathMap);\n  }\n  function match(location) {\n    return pathMap[location];\n  }\n  return {\n    addRoutes, //添加多个路由\n    addRoute, //添加一个路由\n    match, //给一个路径来返回路由\n  };\n}\n","function createRoute(record, location) {\n  let matched = [];\n  if (record) {\n    while (record) {\n      matched.unshift(record);\n      record = record.parent;\n    }\n  }\n  return {\n    ...location,\n    matched,\n  };\n}\n\nexport default class Base {\n  constructor(router) {\n    this.router = router;\n    // 每次更新的是current，每次current变化，我们就可以切换页面\n    this.current = createRoute(null, {\n      path: \"/\",\n    });\n  }\n  // 所有跳转的逻辑都要放在transitionTo中来实现\n  transitionTo(location, listener) {\n    // 用之前的匹配方法\n    let record = this.router.match(location);\n    let route = createRoute(record, { path: location });\n    // 这里需要取消点击进入和路由变化中的两次重复变化，注意path='/'时可能会匹配组件\n    if (\n      location == this.current.path &&\n      route.matched.length == this.current.matched.length\n    ) {\n      return;\n    }\n    this.current = route;\n    // path:'/',matched:[]\n    // 当路由切换的时候，也应该调用transitionTo拿到新的记录\n    listener && listener();\n    this.cb && this.cb(route);\n  }\n  listen(cb) {\n    // 用户自定义的钩子 this._route=route\n    this.cb = cb;\n  }\n}\n","import Base from \"./base\";\nclass History extends Base {\n  constructor(router) {\n    super(router);\n  }\n  setupListener() {\n    window.addEventListener(\"popstate\", function () {\n      console.log(this.window.location.pathname);\n    });\n  }\n  getCurrentLocation() {\n    return window.location.pathname;\n  }\n}\n\nexport default History;\n","import Base from \"./base\";\nfunction ensureSlash() {\n  if (window.location.hash) {\n    return;\n  }\n  window.location.hash = \"/\";\n}\nfunction getHash() {\n  // 截取，获取真正的hash值\n  return window.location.hash.slice(1);\n}\nclass Hash extends Base {\n  constructor(router) {\n    super(router);\n    // 初始化哈希路由的时候要给定默认的哈希路径\n    ensureSlash();\n  }\n  // 之后需要调用此方法，监控hash值的变化\n  setupListener() {\n    // 这里会监听哈希的变化，通过修改url或回退也会触发\n    window.addEventListener(\"hashchange\", () => {\n      this.transitionTo(getHash());\n    });\n  }\n  getCurrentLocation() {\n    return getHash();\n  }\n}\nexport default Hash;\n","import { install, Vue } from \"./install\";\nimport createMatcher from \"./create-matcher\";\nimport History from \"./history/history\";\nimport Hash from \"./history/hash\";\nclass VueRouter {\n  constructor(options) {\n    this.install = install;\n    // 对用户传入的路由表进行映射\n    const routes = options.routes;\n    this.matcher = createMatcher(routes);\n    // 根据不用的模式创建不同的路由系统\n    let mode = options.mode || \"hash\";\n    if (mode == \"hash\") {\n      this.history = new Hash(this);\n    } else if (mode == \"history\") {\n      this.history = new History(this);\n    }\n  }\n  match(path) {\n    return this.matcher.match(path);\n  }\n  push(location) {\n    this.history.transitionTo(location, () => {\n      window.location.hash = location;\n    });\n  }\n  init(app) {\n    let history = this.history;\n    // 根据路径变化，匹配不同的组件进行渲染，路径变化，更新视图，路径需要是响应式的\n    history.transitionTo(history.getCurrentLocation(), () => {\n      history.setupListener(); //监听路由变化\n    });\n    // 每次路由需要调用listen中的方法实现更新_route的值，使他能够发生变化，重新渲染视图\n    history.listen((newRoute) => {\n      app._route = newRoute;\n    });\n  }\n}\nexport default VueRouter;\n"],"names":["name","props","to","type","String","tag","methods","handler","$router","push","render","h","on","click","$slots","functional","parent","data","routerView","console","log","$route","route","depth","$vnode","$parent","record","matched","component","Vue","install","_Vue","mixin","beforeCreate","$options","router","_routerRoot","_router","init","util","defineReactive","history","current","Object","defineProperty","prototype","get","_route","routerLink","createRouteMap","routes","pathMap","forEach","addRouteRecord","parentRecord","path","meta","children","createMatcher","addRoutes","addRoute","match","location","createRoute","unshift","_objectSpread","Base","listener","length","cb","History","window","addEventListener","pathname","ensureSlash","hash","getHash","slice","Hash","transitionTo","VueRouter","options","matcher","mode","app","getCurrentLocation","setupListener","listen","newRoute"],"mappings":"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"}